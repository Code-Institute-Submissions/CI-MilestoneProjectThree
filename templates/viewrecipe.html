{% extends 'base.html'%} {% block content %}
<section class="container">
  <div class="row center-align">
    <h3>{{ recipe.recipe_name }}</h3>
    <div class="row center-align recipeheader">
      <div class="col s12 m6">
        <h5>
          <i class="material-icons">account_circle</i>Recipe created
          by:&nbsp;<span>{{ recipe.created_by }}</span>
        </h5>
      </div>
      <div class="col s12 m6">
        <h5>
          <i class="material-icons">language</i>Cuisine:&nbsp;<span
            >{{cuisines.cuisine_type}}</span
          >
        </h5>
      </div>
    </div>
  </div>
  <div class="card row">
    <div class="center-align col s12">
      <img src="{{recipe.image}}" alt="recipe image" class="recipeimage" />
    </div>
    <div class="row center-align">
      <div class="col s6 m3">
        <i class="material-icons">sort</i><br />Difficulty
        <p class="recipeinfo">{{difficulty.skill_level}}</p>
      </div>
      <div class="col s6 m3 ">
        <i class="material-icons">timer</i><br />Prep Time
        <p class="recipeinfo">{{recipe.prep_time}} mins</p>
      </div>
      <div class="col s6 m3 ">
        <i class="material-icons">timelapse</i><br />Cook Time
        <p class="recipeinfo">{{recipe.cook_time}} mins</p>
      </div>
      <div class="col s6 m3">
        <i class="material-icons">restaurant</i><br />Serves
        <p class="recipeinfo">{{recipe.serves}}</p>
      </div>
    </div>
    <div class="col s12">
      {% if recipe.allergens|length >0 %}
      <p>
        This recipe contains: {% for allergen in recipe.allergens %}
        <span
          ><i class="tiny material-icons red-text">error_outline</i>{{ allergen
          }}</span
        >&nbsp; {% endfor %}
      </p>
      {% endif %}
    </div>
  </div>
  <div class="card row">
    <div class="col s12 m6 left-align">
      <h5><i class="material-icons prefix">list</i>Ingredients</h5>
      {% if recipe.ingredients|length >0 %}
      <ul>
        {% for ingredient in recipe.ingredients %}
        <li>
          <i class="tiny material-icons">chevron_right</i>{{ ingredient }}
        </li>
        <br />
        {% endfor %}
      </ul>
      {% endif %}
    </div>
    <div class="col s12 m6 left-align">
      <h5>
        <i class="material-icons prefix">format_list_numbered</i>Preparation
      </h5>
      {% if recipe.preparation|length >0 %}
      <ul>
        {% for prep in recipe.preparation %}
        <li><i class="tiny material-icons">chevron_right</i>{{ prep }}</li>
        <br />
        {% endfor %}
      </ul>
      {% endif %}
    </div>
  </div>
  {% if session['username'] == recipe.created_by %}
    <div class="row">
        <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" class="btn waves-effect submitbutton" type="submit" name="action">Edit
            <i class="material-icons right">send</i>
        </a>
        <a href="#delete_recipe" class="waves-effect waves-light btn red modal-trigger">Delete
            <i class="material-icons right">send</i>
        </a>
        <div id="delete_recipe" class="modal">
            <div class="modal-content center-align">
                <h5>Are you sure you want to delete this recipe?</h5>
                <p>Please note you will not be able to recover the recipe yourself if you proceed.</p>
                <a href="{{ url_for('delete_recipe', recipe_id = recipe._id) }}" class="modal-close waves-effect btn removebutton">Delete</a>
                <a href="#" class="modal-close waves-effect btn submitbutton">Cancel</a>
            </div>
        </div>
    </div>  
  {% endif %}
</section>
{% endblock %}
